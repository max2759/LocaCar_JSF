<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:pt="http://java.sun.com/jsf/composite" xmlns:f="http://java.sun.com/jsf/core"
                template="WEB-INF/templates/template.xhtml">

    <ui:define name="title">Ajout voiture test</ui:define>
    <ui:define name="content">

        <h:head>
            <title>Ajout voiture test</title>
            <script>
                $( function () {
                    $( '#addCarForm\\:releaseYear' ).datepicker( $.datepicker.regional[ 'fr' ] );
                } );

            </script>
        </h:head>

        <h:body>
            <div class="container">
                <h2>Ajout voiture test</h2>


                <h:form id="addCarForm" enctype="multipart/form-data">
                    <h:panelGroup>

                        <h:panelGroup styleClass="row mb-3">
                            <h:outputLabel value="Marque" styleClass="col-sm-2 col-form-label"/>

                            <h:selectOneMenu id="brandsDisplay" styleClass="form-group"
                                             value="#{modelsBean.modelsEntity.brandsByIdBrands}"
                                             converter="brandsConverter" required="true"
                                             requiredMessage="Veuillez choisir la marque">
                                <f:selectItem itemValue="#{null}" itemLabel="Veuillez sélectionner"/>
                                <f:selectItems value="#{brandsBean.brandsEntities}" var="brands"
                                               itemValue="#{brands}"
                                               itemLabel="#{brands.label}"
                                />
                                <f:ajax render="@all" listener="#{modelsBean.findModelsByBrands}"/>
                            </h:selectOneMenu>
                        </h:panelGroup>


                        <h:panelGroup id="showModels" rendered="#{modelsBean.showModel}" styleClass="row mb-3">
                            <h:outputLabel value="Modèle" styleClass="col-sm-2 col-form-label"/>
                            <h:selectOneMenu id="modelsDisplay" value="#{carsBean.carsEntity.modelsByIdModels}"
                                             converter="modelsConverter" styleClass="form-group" required="true"
                                             requiredMessage="Veuillez choisir le modèle">
                                <f:selectItems value="#{modelsBean.modelsEntities}" var="models"
                                               itemValue="#{models}"
                                               itemLabel="#{models.label}"/>
                                <h:message for="modelsDisplay"/>
                            </h:selectOneMenu>
                        </h:panelGroup>

                        <h:panelGroup styleClass="row mb-3">
                            <h:outputLabel value="Types de voiture" styleClass="col-sm-2 col-form-label"/>
                            <h:selectOneMenu id="carTypesDisplay" styleClass="form-group"
                                             value="#{carsBean.carsEntity.carsTypesByIdCarsTypes}"
                                             converter="carTypesConverter" required="true"
                                             requiredMessage="Veuillez choisir le type de voiture">
                                <f:selectItem itemValue="#{null}" itemLabel="Veuillez sélectionner"/>
                                <f:selectItems value="#{carTypesbean.carsTypesEntities}" var="carTypes"
                                               itemValue="#{carTypes}"
                                               itemLabel="#{carTypes.label}"/>
                                <h:message for="carTypesDisplay"/>
                            </h:selectOneMenu>
                        </h:panelGroup>


                        <h:panelGroup styleClass="row mb-3">
                            <h:outputLabel value="Transmission" styleClass="col-sm-2 col-form-label"/>
                            <h:selectOneMenu id="carsGearboxDisplay" styleClass="form-group"
                                             value="#{carsBean.carsEntity.carsGearboxByIdCarsGearBox}"
                                             converter="carsGearboxConverter" required="true"
                                             requiredMessage="Veuillez choisir le type de boite de vitesse">
                                <f:selectItem itemValue="#{null}" itemLabel="Veuillez sélectionner"/>
                                <f:selectItems value="#{carsGearboxBean.carsGearboxEntities}" var="carsGearbox"
                                               itemValue="#{carsGearbox}"
                                               itemLabel="#{carsGearbox.label}"/>
                                <h:message for="carsGearboxDisplay"/>
                            </h:selectOneMenu>
                        </h:panelGroup>

                        <h:panelGroup styleClass="row mb-3">
                            <h:outputLabel value="Carburant" styleClass="col-sm-2 col-form-label"/>
                            <h:selectOneMenu id="carsFuelsDisplay" styleClass="form-group"
                                             value="#{carsBean.carsEntity.carsFuelsByIdCarsFuels}"
                                             converter="carsFuelsConverter" required="true"
                                             requiredMessage="Veuillez choisir le type de carburant">
                                <f:selectItem itemValue="#{null}" itemLabel="Veuillez sélectionner"/>
                                <f:selectItems value="#{carsFuelsBean.carsFuelsEntities}" var="carsFuels"
                                               itemValue="#{carsFuels}"
                                               itemLabel="#{carsFuels.label}"/>
                                <h:message for="carsFuelsDisplay"/>
                            </h:selectOneMenu>
                        </h:panelGroup>

                        <h:panelGroup styleClass="row mb-3">
                            <h:outputLabel value="Couleur" styleClass="col-sm-2 col-form-label"/>
                            <h:selectOneMenu id="carsColorsDisplay" styleClass="form-group"
                                             value="#{carsBean.carsEntity.carsColorsByIdCarsColors}"
                                             converter="carsColorsConverter" required="true"
                                             requiredMessage="Veuillez choisir la couleur">
                                <f:selectItem itemValue="#{null}" itemLabel="Veuillez sélectionner"/>
                                <f:selectItems value="#{carsColorsBean.carsColorsEntities}" var="carsColors"
                                               itemValue="#{carsColors}"
                                               itemLabel="#{carsColors.label}"/>
                                <h:message for="carsColorsDisplay"/>
                            </h:selectOneMenu>
                        </h:panelGroup>

                        <h:panelGroup styleClass="row mb-3">
                            <h:outputLabel value="Options" styleClass="col-sm-2 col-form-label"/>
                            <h:selectManyCheckbox id="selectOptionsBox" value="#{carsOptionsBean.optionsEntityList}"
                                                  styleClass="form-check form-check-inline">
                                <f:selectItems value="#{optionsBean.optionsEntities}" var="options"
                                               itemValue="#{options}" itemLabel="#{options.label}"/>
                            </h:selectManyCheckbox>
                        </h:panelGroup>

                        <h:panelGroup styleClass="row mb-3">
                            <h:outputLabel value="Année du véhicule" for="releaseYear"
                                           styleClass="col-sm-2 col-form-label"/>
                            <div class="col-sm-10">
                                <h:inputText value="#{carsBean.carsEntity.releaseYear}" styleClass="form-control"
                                             required="true"
                                             requiredMessage="Veuillez choisir une date !"
                                             id="releaseYear"
                                             converter="localDateTimeConverter">
                                    <f:validator validatorId="dateValidator"/>
                                </h:inputText>
                            </div>
                            <h:message for="releaseYear" id="releaseYearMessage" styleClass="alert alert-danger "/>
                        </h:panelGroup>

                        <h:panelGroup styleClass="row mb-3">
                            <h:outputLabel value="Nombre de chevaux" for="horsePower"
                                           styleClass="col-sm-2 col-form-label"/>
                            <div class="col-sm-10">
                                <h:inputText value="#{carsBean.carsEntity.horsePower}" styleClass="form-control"
                                             required="true"
                                             requiredMessage="Veuillez entrer le nombre de chevaux"
                                             id="horsePower">
                                    <f:convertNumber minFractionDigits="0"/>
                                    <f:validateLongRange minimum="2" maximum="2000"/>
                                </h:inputText>
                            </div>
                        </h:panelGroup>

                        <h:panelGroup styleClass="row mb-3">
                            <h:outputLabel value="Nombre de kilomètre" for="kilometer"
                                           styleClass="col-sm-2 col-form-label"/>
                            <div class="col-sm-10">
                                <h:inputText value="#{carsBean.carsEntity.kilometer}" styleClass="form-control"
                                             required="true"
                                             pt:placeholder="Votre option ici..."
                                             requiredMessage="Veuillez entrer le nombre de kilomètre"
                                             id="kilometer">
                                    <f:convertNumber minFractionDigits="0"/>
                                </h:inputText>
                            </div>
                        </h:panelGroup>

                        <h:panelGroup styleClass="row mb-3">
                            <h:outputLabel value="Images"
                                           styleClass="col-sm-2 col-form-label"/>
                            <h:inputFile value="#{picturesBean.file}" id="picturesInput" required="true"
                                         requiredMessage="Ajouter une image">
                                <f:validator validatorId="carsPicturesValidator"/>
                            </h:inputFile>
                            <h:message for="picturesInput" id="picturesInputMessages" styleClass="alert alert-danger"/>
                        </h:panelGroup>

                        <h:panelGroup>
                            <h:commandButton styleClass="btn btn-outline-success btn-sm"
                                             value="#{bundle['fxs.insurancesList.save']}"
                                             action="#{carsBean.addCar}">
                                <f:ajax render="@all" execute="addCarForm"/>
                            </h:commandButton>
                        </h:panelGroup>

                    </h:panelGroup>
                </h:form>
            </div>
        </h:body>
    </ui:define>
</ui:composition>